/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
 */
task copySrcFilesToDistFolder {
    doFirst {
        logger.lifecycle "copyAssetFiles"
        copy {
            from "$project.projectDir/src/assets"
            into "$project.projectDir/dist/src/assets"
        }
    }
    doLast {
        logger.lifecycle "copyDemoGifs"
        copy {
            from "$project.projectDir/demo.gif"
            into "$project.projectDir/dist"
        }
        copy {
            from "$project.projectDir/demo1.gif"
            into "$project.projectDir/dist"
        }
        copy {
            from "$project.projectDir/demo2.gif"
            into "$project.projectDir/dist"
        }
    }
}


task copyBuildPackageJsonFile {
    doFirst {
        logger.lifecycle "deleCurrentPackageJsonFile"
        delete "$project.projectDir/package.json"
    }
    doLast {
        logger.lifecycle "copyBuildPackageJsonFile"
        copy {
            from "$project.projectDir/packageJsonFiles/build.package.json"
            into "$project.projectDir"
            logger.lifecycle "renameBuildPackageJsonFile"
            rename 'build.package.json', 'package.json'
        }

    }

}


task copyDevPackageJsonFile {
    doFirst {
        logger.lifecycle "deleCurrentPackageJsonFile"
        delete "$project.projectDir/package.json"
    }
    doLast {
        logger.lifecycle "copyDevPackageJsonFile"
        copy {
            from "$project.projectDir/packageJsonFiles/dev.package.json"
            into "$project.projectDir"
            logger.lifecycle "renameDevPackageJsonFile"
            rename 'dev.package.json', 'package.json'
        }

    }
}

// Only Run After npm publish
task updateBuildPackageJsonFile {
    doFirst {
        logger.lifecycle "deleCurrentBuildPackageJsonFile"
        delete "$project.projectDir/packageJsonFiles/build.package.json"
    }
    doLast {
        logger.lifecycle "copyToBuildPackageJsonFiles_Build"
        copy {
            from "$project.projectDir/package.json"
            into "$project.projectDir/packageJsonFiles"
            logger.lifecycle "renameBuildPackageJsonFile"
            rename 'package.json', 'build.package.json'
        }

    }
}

// Only Run In development when active package.json file is dev.package.json
task updateDevPackageJsonFile {
    doFirst {
        logger.lifecycle "deleCurrentDevPackageJsonFile"
        delete "$project.projectDir/packageJsonFiles/dev.package.json"
    }
    doLast {
        logger.lifecycle "copyToBuildPackageJsonFiles_Dev"
        copy {
            from "$project.projectDir/package.json"
            into "$project.projectDir/packageJsonFiles"
            logger.lifecycle "renameBuildPackageJsonFile"
            rename 'package.json', 'dev.package.json'
        }

    }
}
